import React, { useEffect, useState } from 'react';
import { Button, TextField, Box } from '@mui/material';

const PostForm = ({ onSubmit, editingPost, setEditingPost }) => {
  const [title, setTitle] = useState('');
  const [body, setBody] = useState('');

  useEffect(() => {
    if (editingPost) {
      setTitle(editingPost.title);
      setBody(editingPost.body);
    }
  }, [editingPost]);

  const handleSubmit = (e) => {
    e.preventDefault();
    const postData = { title, body };
    if (editingPost) {
      onSubmit(editingPost.id, postData);
    } else {
      onSubmit(postData);
    }
    setTitle('');
    setBody('');
  };

  return (
    <Box component="form" onSubmit={handleSubmit} sx={{ mb: 3 }}>
      <TextField
        label="Title"
        fullWidth
        value={title}
        onChange={(e) => setTitle(e.target.value)}
        sx={{ mb: 2 }}
      />
      <TextField
        label="Body"
        fullWidth
        value={body}
        onChange={(e) => setBody(e.target.value)}
        sx={{ mb: 2 }}
      />
      <Button type="submit" variant="contained" color="primary">
        {editingPost ? 'Update Post' : 'Create Post'}
      </Button>
      {editingPost && (
        <Button onClick={() => setEditingPost(null)} sx={{ ml: 2 }}>
          Cancel
        </Button>
      )}
    </Box>
  );
};

export default PostForm;